# Инфраструктура Яндекс.Облака: Terraform

## Обзор
Данный репозиторий содержит инфраструктурный код на Terraform для развертывания базовой облачной инфраструктуры проекта в Яндекс.Облаке [1].

## Компоненты Инфраструктуры
Инфраструктура включает:
*   2 виртуальные машины для кластера Kubernetes: 1 master нода, 1 app нода [2].
*   1 служебный сервер (`srv`): предназначен для инструментов мониторинга, логирования и сборки контейнеров [2]. Минимальные рекомендованные требования: 2 vCPU, 4 GB RAM, 30 GB HDD [2].

## Предварительные требования
Для успешного развертывания требуются следующие компоненты:
*   Аккаунт Яндекс.Облака.
*   OAuth токен Яндекс.Облака.
*   ID Облака (Cloud ID) и ID Каталога (Folder ID).
*   Установленный Terraform (рекомендуется последняя стабильная версия).
*   Установленный Git.
*   Публичный SSH-ключ (например, `~/.ssh/id_rsa.pub`) для доступа к создаваемым ВМ.

## Настройка конфигурации Terraform
1.  Клонирование репозитория: `git clone https://github.com/OldmanHarry/Diplom.git` [1]
    Переход в директорию: `cd Diplom`
2.  Редактирование `provider.tf`: укажите учетные данные [2].
    ```terraform
    provider "yandex" {
      token     = "<ВАШ_OAUTH_ТОКЕН>" # Рекомендуется: export YC_TOKEN="<ВАШ_ТОКЕН>"
      cloud_id  = "<ВАШ_CLOUD_ID>"
      folder_id = "<ВАШ_FOLDER_ID>"
      zone      = "ru-central1-a"
    }
    ```
    **Примечание**: Коммитирование конфиденциальных данных (токенов) напрямую в репозиторий не допускается.
3.  Проверка пути к SSH-ключу в `main.tf`: строка `ssh-keys = "ubuntu:${file("~/.ssh/id_rsa.pub")}"` должна указывать на фактическое расположение ключа.

## Развертывание Инфраструктуры
Развертывание инфраструктуры осуществляется выполнением команд в корневой директории проекта (`Diplom`):
1.  Инициализация Terraform: `terraform init`
2.  Проверка плана развертывания: `terraform plan`
3.  Применение конфигурации: `terraform apply` (для автоматического подтверждения: `terraform apply -auto-approve`).

## Доступ к Ресурсам
После успешного применения Terraform, публичный IP-адрес служебного сервера (`srv`) доступен командой: `terraform output srv_external_ip`.
Подключение к серверу по SSH осуществляется с использованием приватного ключа.

## Следующие шаги
После развертывания инфраструктуры будет произведена автоматизация установки необходимого ПО на ВМ, в частности с помощью Ansible [3].